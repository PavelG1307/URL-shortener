1. Алгоритм создания ключа:

  При добавление ключа в БД отправляется запрос на добавление, при этом поле url теперь с параметром unique, что не даст добавить второй такой же URL. Если данный URL уже был встречался ранее, программа получает из БД rowid. Далее при помощи алгоритма MD5 хэшируем id и передаем его в качестве ключа обратно.

3. Алгоритм перехода по ключу:

  После получения ключа, идет запрос в кэш, если там есть такой ключ, то обратно сразу выдается url (а пара key - url переносится на первое место).
Если в кэше нет такого ключа, ключ дешифруется, и из БД запрашивается url с индексом, полученным при дешифровании.
Если получили url, отправляем его обратно, в противном случае отправляем ответ со статусом 404.

3. Дальнейшее развитие:
  Если дальше развивать данное приложение, в первую очередь напрашивается ногопоточность или ассинхроность, следующим шагом я бы сделал страницу для добавления нового URL, личный кабинет, где можно было бы делать свои сокращеные ссылки, также ограничил бы время действия короткой ссылки, чтобы не перегружать программу ненужными ссылками.
